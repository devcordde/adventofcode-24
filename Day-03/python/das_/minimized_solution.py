print((r:=__import__("functools").reduce,f:=__import__("re").findall,d:=r"mul\((\d+),(\d+)\)",r(lambda a,n:(False,a[1],a[2])if n=="don't()"else(True,a[1],a[2])if n=="do()"else(a[0],a[1]+(j:=r(lambda a,b:int(a)*int(b),f(d,n)[0])),a[2]+j)if a[0]else(False,a[1]+r(lambda a,b:int(a)*int(b),f(d,n)[0]),a[2]),f(r"(do\(\)|don't\(\)|mul\(\d+,\d+\))","".join(open("input.txt").readlines())),(True,0,0)))[3:][0][1:])